name: Docusaurus Buiuld
run-name: Docusaurus Build
on: [push]
jobs:
  Docusaurus-Build:
    runs-on: docusaurus
    steps:
      - name: Get current date
        id: date
        run: echo "::set-output name=date::$(date +'%Y%m%d')"
        
      - run: pwd
      - run: whoami
      - run: ls -la
      - run: ls -la /mnt/s3-fmadio-doc/
      - run: rm -rf *
      - run: pwd
      - run: git clone git@github.com:fmadio/documentationV2.git
      - run: ls -la
      - run: npx create-docusaurus@latest fmadio-doc classic
      - run: rm fmadio-doc/docs/ -rf
      - run: mv documentationV2/ fmadio-doc/docs
      - run: cp fmadio-doc/docs/_config/docusaurus.config.js fmadio-doc/
      - run: cp fmadio-doc/docs/_config/static/index.html fmadio-doc/static
      - run: rm fmadio-doc/src/pages/index.js
      - run: cd fmadio-doc/ && npm i docusaurus-lunr-search  --save
      - run: cd fmadio-doc/ && npm run swizzle docusaurus-lunr-search SearchBar -- --eject --danger
      - run: cd fmadio-doc/ && npm run build
      - run: cp fmadio-doc/build/ /home/fmadio/${{ steps.date.outputs.date }}/
      - run: pwd
      #- run: npm run swizzle docusaurus-lunr-search SearchBar -- --eject --danger

      
      
      
      
      
      
      #- name: Check out repository code
      #  uses: actions/checkout@v3
      #- run: echo "üí° The ${{ github.repository }} repository has been cloned to the runner."
      #- run: echo "üñ•Ô∏è The workflow is now ready to test your code on the runner."
      #- name: List files in the repository
      #  run: |
      #    ls ${{ github.workspace }}
      #- run: echo "üçè This job's status is ${{ job.status }}."
